var e=Object.defineProperty,s=(s,t,r)=>(((s,t,r)=>{t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r})(s,"symbol"!=typeof t?t+"":t,r),r);class t{constructor(e){s(this,"users",new Map),s(this,"currentUserId"),s(this,"callbacks",new Set),this.currentUserId=e}addUser(e){this.users.set(e.id,{...e,online:!0,lastSeen:Date.now()}),this.notifyChange()}removeUser(e){const s=this.users.get(e);s&&(s.online=!1,s.lastSeen=Date.now()),this.notifyChange()}updateCursor(e,s){const t=this.users.get(e);t&&(t.cursor=s,t.lastSeen=Date.now(),this.notifyChange())}updateSelection(e,s){const t=this.users.get(e);t&&(t.selection=s,t.lastSeen=Date.now(),this.notifyChange())}getUsers(){return Array.from(this.users.values())}getOnlineUsers(){return this.getUsers().filter(e=>e.online&&e.id!==this.currentUserId)}onChange(e){return this.callbacks.add(e),()=>this.callbacks.delete(e)}notifyChange(){const e=this.getUsers();this.callbacks.forEach(s=>s(e))}clear(){this.users.clear(),this.notifyChange()}}export{t as UserPresenceManager};
//# sourceMappingURL=UserPresence.js.map
