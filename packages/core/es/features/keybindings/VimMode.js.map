{"version":3,"file":"VimMode.js","sources":["../../../src/features/keybindings/VimMode.ts"],"sourcesContent":["/**\n * Vim 模式\n */\n\nimport type * as Monaco from 'monaco-editor'\n\nexport class VimMode {\n  private editor: Monaco.editor.IStandaloneCodeEditor | null = null\n  private mode: 'normal' | 'insert' | 'visual' = 'normal'\n  private enabled = false\n\n  setEditor(editor: Monaco.editor.IStandaloneCodeEditor): void {\n    this.editor = editor\n  }\n\n  enable(): void {\n    if (this.enabled) return\n    this.enabled = true\n    this.mode = 'normal'\n    this.setupVimBindings()\n  }\n\n  disable(): void {\n    this.enabled = false\n    this.mode = 'insert'\n  }\n\n  getMode(): string {\n    return this.mode\n  }\n\n  private setupVimBindings(): void {\n    if (!this.editor) return\n\n    const monaco = (globalThis as { monaco?: typeof Monaco }).monaco\n    if (!monaco) return\n\n    // Normal mode bindings\n    this.editor.addCommand(monaco.KeyCode.KeyH, () => {\n      if (this.mode === 'normal') {\n        this.editor?.trigger('vim', 'cursorLeft', null)\n      }\n    })\n\n    this.editor.addCommand(monaco.KeyCode.KeyJ, () => {\n      if (this.mode === 'normal') {\n        this.editor?.trigger('vim', 'cursorDown', null)\n      }\n    })\n\n    this.editor.addCommand(monaco.KeyCode.KeyK, () => {\n      if (this.mode === 'normal') {\n        this.editor?.trigger('vim', 'cursorUp', null)\n      }\n    })\n\n    this.editor.addCommand(monaco.KeyCode.KeyL, () => {\n      if (this.mode === 'normal') {\n        this.editor?.trigger('vim', 'cursorRight', null)\n      }\n    })\n\n    this.editor.addCommand(monaco.KeyCode.KeyI, () => {\n      if (this.mode === 'normal') {\n        this.mode = 'insert'\n      }\n    })\n\n    this.editor.addCommand(monaco.KeyCode.Escape, () => {\n      this.mode = 'normal'\n    })\n  }\n}\n\n"],"names":["d","Object","defineProperty","t","o","e","i","enumerable","configurable","writable","value","r","VimMode","constructor","__publicField","this","setEditor","editor","enable","enabled","mode","setupVimBindings","disable","getMode","monaco","globalThis","addCommand","KeyCode","KeyH","trigger","KeyJ","KeyK","KeyL","KeyI","Escape"],"mappings":"AAMO,IAAAA,EAAAC,OAAAC,eAAAC,EAAA,CAAAC,EAAAC,EAAAC,KAAA,EAAAF,EAAAC,EAAAC,KAAAD,KAAAD,EAAAJ,EAAAI,EAAAC,EAAA,CAAAE,YAAA,EAAAC,cAAA,EAAAC,UAAA,EAAAC,MAAAJ,IAAAF,EAAAC,GAAAC,GAAAK,CAAAP,EAAA,iBAAAC,EAAAA,EAAA,GAAAA,EAAAC,GAAAA,GAAA,MAAMM,EAAN,WAAAC,GACLC,EAAAC,KAAQ,SAAqD,MAC7DD,EAAAC,KAAQ,OAAuC,UAC/CD,EAAAC,KAAQ,WAAU,GAElB,SAAAC,CAAUC,GACRF,KAAKE,OAASA,CAChB,CAEA,MAAAC,GACMH,KAAKI,UACTJ,KAAKI,SAAU,EACfJ,KAAKK,KAAO,SACZL,KAAKM,mBACP,CAEA,OAAAC,GACEP,KAAKI,SAAU,EACfJ,KAAKK,KAAO,QACd,CAEA,OAAAG,GACE,OAAOR,KAAKK,IACd,CAEQ,gBAAAC,GACN,IAAKN,KAAKE,OAAQ,OAElB,MAAMO,EAAUC,WAA0CD,OACrDA,IAGLT,KAAKE,OAAOS,WAAWF,EAAOG,QAAQC,KAAM,KACxB,WAAdb,KAAKK,MACPL,KAAKE,QAAQY,QAAQ,MAAO,aAAc,QAI9Cd,KAAKE,OAAOS,WAAWF,EAAOG,QAAQG,KAAM,KACxB,WAAdf,KAAKK,MACPL,KAAKE,QAAQY,QAAQ,MAAO,aAAc,QAI9Cd,KAAKE,OAAOS,WAAWF,EAAOG,QAAQI,KAAM,KACxB,WAAdhB,KAAKK,MACPL,KAAKE,QAAQY,QAAQ,MAAO,WAAY,QAI5Cd,KAAKE,OAAOS,WAAWF,EAAOG,QAAQK,KAAM,KACxB,WAAdjB,KAAKK,MACPL,KAAKE,QAAQY,QAAQ,MAAO,cAAe,QAI/Cd,KAAKE,OAAOS,WAAWF,EAAOG,QAAQM,KAAM,KACxB,WAAdlB,KAAKK,OACPL,KAAKK,KAAO,YAIhBL,KAAKE,OAAOS,WAAWF,EAAOG,QAAQO,OAAQ,KAC5CnB,KAAKK,KAAO,WAEhB"}