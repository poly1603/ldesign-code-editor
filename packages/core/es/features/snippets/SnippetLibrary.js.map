{"version":3,"file":"SnippetLibrary.js","sources":["../../../src/features/snippets/SnippetLibrary.ts"],"sourcesContent":["/**\n * 代码片段库\n */\n\nexport interface Snippet {\n  id: string\n  name: string\n  prefix: string\n  body: string | string[]\n  description?: string\n  language?: string\n  tags?: string[]\n  author?: string\n  created?: number\n}\n\nexport interface SnippetCategory {\n  id: string\n  name: string\n  snippets: Snippet[]\n}\n\nexport class SnippetLibrary {\n  private snippets = new Map<string, Snippet>()\n  private categories = new Map<string, SnippetCategory>()\n\n  addSnippet(snippet: Snippet): void {\n    this.snippets.set(snippet.id, snippet)\n  }\n\n  removeSnippet(id: string): boolean {\n    return this.snippets.delete(id)\n  }\n\n  getSnippet(id: string): Snippet | undefined {\n    return this.snippets.get(id)\n  }\n\n  getSnippetsByLanguage(language: string): Snippet[] {\n    return Array.from(this.snippets.values()).filter(\n      (s) => !s.language || s.language === language\n    )\n  }\n\n  getSnippetsByTag(tag: string): Snippet[] {\n    return Array.from(this.snippets.values()).filter(\n      (s) => s.tags && s.tags.includes(tag)\n    )\n  }\n\n  searchSnippets(query: string): Snippet[] {\n    const lowerQuery = query.toLowerCase()\n    return Array.from(this.snippets.values()).filter(\n      (s) =>\n        s.name.toLowerCase().includes(lowerQuery) ||\n        s.prefix.toLowerCase().includes(lowerQuery) ||\n        s.description?.toLowerCase().includes(lowerQuery)\n    )\n  }\n\n  exportSnippets(): string {\n    const data = Array.from(this.snippets.values())\n    return JSON.stringify(data, null, 2)\n  }\n\n  importSnippets(json: string): number {\n    try {\n      const snippets = JSON.parse(json) as Snippet[]\n      snippets.forEach((s) => this.addSnippet(s))\n      return snippets.length\n    } catch {\n      return 0\n    }\n  }\n\n  addCategory(category: SnippetCategory): void {\n    this.categories.set(category.id, category)\n  }\n\n  getCategories(): SnippetCategory[] {\n    return Array.from(this.categories.values())\n  }\n\n  clear(): void {\n    this.snippets.clear()\n    this.categories.clear()\n  }\n}\n\n"],"names":["SnippetLibrary","constructor","__publicField","this","Map","addSnippet","snippet","snippets","set","id","removeSnippet","delete","getSnippet","get","getSnippetsByLanguage","language","Array","from","values","filter","s","getSnippetsByTag","tag","tags","includes","searchSnippets","query","lowerQuery","toLowerCase","name","prefix","description","exportSnippets","data","JSON","stringify","importSnippets","json","parse","forEach","length","addCategory","category","categories","getCategories","clear"],"mappings":"gKAsBO,MAAMA,EAAN,WAAAC,GACLC,EAAAC,KAAQ,WAAW,IAAIC,KACvBF,EAAAC,KAAQ,aAAa,IAAIC,IAAA,CAEzB,UAAAC,CAAWC,GACTH,KAAKI,SAASC,IAAIF,EAAQG,GAAIH,EAChC,CAEA,aAAAI,CAAcD,GACZ,OAAON,KAAKI,SAASI,OAAOF,EAC9B,CAEA,UAAAG,CAAWH,GACT,OAAON,KAAKI,SAASM,IAAIJ,EAC3B,CAEA,qBAAAK,CAAsBC,GACpB,OAAOC,MAAMC,KAAKd,KAAKI,SAASW,UAAUC,OACvCC,IAAOA,EAAEL,UAAYK,EAAEL,WAAaA,EAEzC,CAEA,gBAAAM,CAAiBC,GACf,OAAON,MAAMC,KAAKd,KAAKI,SAASW,UAAUC,OACvCC,GAAMA,EAAEG,MAAQH,EAAEG,KAAKC,SAASF,GAErC,CAEA,cAAAG,CAAeC,GACb,MAAMC,EAAaD,EAAME,cACzB,OAAOZ,MAAMC,KAAKd,KAAKI,SAASW,UAAUC,OACvCC,GACCA,EAAES,KAAKD,cAAcJ,SAASG,IAC9BP,EAAEU,OAAOF,cAAcJ,SAASG,IAChCP,EAAEW,aAAaH,cAAcJ,SAASG,GAE5C,CAEA,cAAAK,GACE,MAAMC,EAAOjB,MAAMC,KAAKd,KAAKI,SAASW,UACtC,OAAOgB,KAAKC,UAAUF,EAAM,KAAM,EACpC,CAEA,cAAAG,CAAeC,GACb,IACE,MAAM9B,EAAW2B,KAAKI,MAAMD,GAC5B,OAAA9B,EAASgC,QAASnB,GAAMjB,KAAKE,WAAWe,IACjCb,EAASiC,MAClB,CAAA,MACE,QACF,CACF,CAEA,WAAAC,CAAYC,GACVvC,KAAKwC,WAAWnC,IAAIkC,EAASjC,GAAIiC,EACnC,CAEA,aAAAE,GACE,OAAO5B,MAAMC,KAAKd,KAAKwC,WAAWzB,SACpC,CAEA,KAAA2B,GACE1C,KAAKI,SAASsC,QACd1C,KAAKwC,WAAWE,OAClB"}