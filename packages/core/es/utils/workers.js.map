{"version":3,"file":"workers.js","sources":["../../src/utils/workers.ts"],"sourcesContent":["/**\r\n * Monaco Editor Worker 配置工具\r\n */\r\n\r\nimport * as monaco from 'monaco-editor'\r\n\r\n/**\r\n * 配置 Monaco Editor Workers\r\n * 这样可以显著提升加载性能\r\n */\r\nexport function setupMonacoWorkers(_config?: any): void {\r\n  // vite-plugin-monaco-editor 会自动处理 worker 配置\r\n  // 我们只需要确保 MonacoEnvironment 存在\r\n  // @ts-ignore\r\n  if (!self.MonacoEnvironment) {\r\n    // @ts-ignore\r\n    self.MonacoEnvironment = {}\r\n  }\r\n}\r\n\r\n/**\r\n * 预加载常用语言支持\r\n */\r\nexport async function preloadLanguages(languages: string[] = []): Promise<void> {\r\n  const promises: Promise<any>[] = []\r\n\r\n  if (languages.includes('typescript') || languages.includes('javascript')) {\r\n    promises.push(\r\n      import('monaco-editor/esm/vs/language/typescript/monaco.contribution')\r\n    )\r\n  }\r\n\r\n  if (languages.includes('json')) {\r\n    promises.push(\r\n      import('monaco-editor/esm/vs/language/json/monaco.contribution')\r\n    )\r\n  }\r\n\r\n  if (languages.includes('css') || languages.includes('scss') || languages.includes('less')) {\r\n    promises.push(\r\n      import('monaco-editor/esm/vs/language/css/monaco.contribution')\r\n    )\r\n  }\r\n\r\n  if (languages.includes('html')) {\r\n    promises.push(\r\n      import('monaco-editor/esm/vs/language/html/monaco.contribution')\r\n    )\r\n  }\r\n\r\n  await Promise.all(promises)\r\n}\r\n\r\n/**\r\n * 配置 TypeScript 编译选项\r\n */\r\nexport function setupTypeScriptDefaults() {\r\n  monaco.languages.typescript.typescriptDefaults.setCompilerOptions({\r\n    target: monaco.languages.typescript.ScriptTarget.Latest,\r\n    allowNonTsExtensions: true,\r\n    moduleResolution: monaco.languages.typescript.ModuleResolutionKind.NodeJs,\r\n    module: monaco.languages.typescript.ModuleKind.CommonJS,\r\n    noEmit: true,\r\n    esModuleInterop: true,\r\n    jsx: monaco.languages.typescript.JsxEmit.React,\r\n    reactNamespace: 'React',\r\n    allowJs: true,\r\n    typeRoots: ['node_modules/@types']\r\n  })\r\n\r\n  monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({\r\n    noSemanticValidation: false,\r\n    noSyntaxValidation: false\r\n  })\r\n}\r\n\r\n/**\r\n * 配置 JavaScript 编译选项\r\n */\r\nexport function setupJavaScriptDefaults() {\r\n  monaco.languages.typescript.javascriptDefaults.setCompilerOptions({\r\n    target: monaco.languages.typescript.ScriptTarget.Latest,\r\n    allowNonTsExtensions: true,\r\n    allowJs: true,\r\n    jsx: monaco.languages.typescript.JsxEmit.React\r\n  })\r\n\r\n  monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({\r\n    noSemanticValidation: false,\r\n    noSyntaxValidation: false\r\n  })\r\n}\r\n"],"names":["setupMonacoWorkers","_config","self","MonacoEnvironment","async","preloadLanguages","languages","promises","includes","push","import","Promise","all","setupTypeScriptDefaults","monaco","typescript","typescriptDefaults","setCompilerOptions","target","ScriptTarget","Latest","allowNonTsExtensions","moduleResolution","ModuleResolutionKind","NodeJs","module","ModuleKind","CommonJS","noEmit","esModuleInterop","jsx","JsxEmit","React","reactNamespace","allowJs","typeRoots","setDiagnosticsOptions","noSemanticValidation","noSyntaxValidation","setupJavaScriptDefaults","javascriptDefaults"],"mappings":"gCAUO,SAASA,EAAmBC,GAI5BC,KAAKC,oBAERD,KAAKC,kBAAoB,CAAA,EAE7B,CAKAC,eAAsBC,EAAiBC,EAAsB,IAC3D,MAAMC,EAA2B,IAE7BD,EAAUE,SAAS,eAAiBF,EAAUE,SAAS,gBACzDD,EAASE,KACPC,OAAO,4HAIPJ,EAAUE,SAAS,SACrBD,EAASE,KACPC,OAAO,uHAIPJ,EAAUE,SAAS,QAAUF,EAAUE,SAAS,SAAWF,EAAUE,SAAS,UAChFD,EAASE,KACPC,OAAO,qHAIPJ,EAAUE,SAAS,SACrBD,EAASE,KACPC,OAAO,4HAILC,QAAQC,IAAIL,EACpB,UAKgBM,IACdC,EAAOR,UAAUS,WAAWC,mBAAmBC,mBAAmB,CAChEC,OAAQJ,EAAOR,UAAUS,WAAWI,aAAaC,OACjDC,sBAAsB,EACtBC,iBAAkBR,EAAOR,UAAUS,WAAWQ,qBAAqBC,OACnEC,OAAQX,EAAOR,UAAUS,WAAWW,WAAWC,SAC/CC,QAAQ,EACRC,iBAAiB,EACjBC,IAAKhB,EAAOR,UAAUS,WAAWgB,QAAQC,MACzCC,eAAgB,QAChBC,SAAS,EACTC,UAAW,CAAC,yBAGdrB,EAAOR,UAAUS,WAAWC,mBAAmBoB,sBAAsB,CACnEC,sBAAsB,EACtBC,oBAAoB,GAExB,CAKO,SAASC,IACdzB,EAAOR,UAAUS,WAAWyB,mBAAmBvB,mBAAmB,CAChEC,OAAQJ,EAAOR,UAAUS,WAAWI,aAAaC,OACjDC,sBAAsB,EACtBa,SAAS,EACTJ,IAAKhB,EAAOR,UAAUS,WAAWgB,QAAQC,QAG3ClB,EAAOR,UAAUS,WAAWyB,mBAAmBJ,sBAAsB,CACnEC,sBAAsB,EACtBC,oBAAoB,GAExB"}