{"version":3,"file":"language-utils.js","sources":["../../src/utils/language-utils.ts"],"sourcesContent":["/**\r\n * Language utilities for Monaco Editor\r\n */\r\n\r\nimport * as monaco from 'monaco-editor'\r\n\r\n/**\r\n * Language mapping for file extensions and common aliases\r\n */\r\nexport const LANGUAGE_EXTENSIONS: Record<string, string> = {\r\n  // JavaScript/TypeScript\r\n  'js': 'javascript',\r\n  'mjs': 'javascript',\r\n  'cjs': 'javascript',\r\n  'jsx': 'javascriptreact',\r\n  'ts': 'typescript',\r\n  'tsx': 'typescriptreact',\r\n  'mts': 'typescript',\r\n  'cts': 'typescript',\r\n  \r\n  // Web\r\n  'vue': 'vue',\r\n  'html': 'html',\r\n  'htm': 'html',\r\n  'xml': 'xml',\r\n  'svg': 'xml',\r\n  'css': 'css',\r\n  'scss': 'scss',\r\n  'sass': 'scss',\r\n  'less': 'less',\r\n  'styl': 'stylus',\r\n  'stylus': 'stylus',\r\n  \r\n  // Config\r\n  'json': 'json',\r\n  'jsonc': 'json',\r\n  'json5': 'json',\r\n  'yaml': 'yaml',\r\n  'yml': 'yaml',\r\n  'toml': 'toml',\r\n  'ini': 'ini',\r\n  'conf': 'ini',\r\n  'env': 'ini',\r\n  \r\n  // Backend\r\n  'py': 'python',\r\n  'pyw': 'python',\r\n  'java': 'java',\r\n  'kt': 'kotlin',\r\n  'kts': 'kotlin',\r\n  'go': 'go',\r\n  'rs': 'rust',\r\n  'php': 'php',\r\n  'rb': 'ruby',\r\n  'cs': 'csharp',\r\n  'fs': 'fsharp',\r\n  'fsx': 'fsharp',\r\n  'fsi': 'fsharp',\r\n  'swift': 'swift',\r\n  'dart': 'dart',\r\n  \r\n  // Low-level\r\n  'c': 'c',\r\n  'h': 'c',\r\n  'cpp': 'cpp',\r\n  'cc': 'cpp',\r\n  'cxx': 'cpp',\r\n  'hpp': 'cpp',\r\n  'hxx': 'cpp',\r\n  'm': 'objective-c',\r\n  'mm': 'objective-c',\r\n  \r\n  // Shell\r\n  'sh': 'shell',\r\n  'bash': 'shell',\r\n  'zsh': 'shell',\r\n  'fish': 'shell',\r\n  'ps1': 'powershell',\r\n  'psm1': 'powershell',\r\n  'psd1': 'powershell',\r\n  'bat': 'bat',\r\n  'cmd': 'bat',\r\n  \r\n  // Database\r\n  'sql': 'sql',\r\n  'mysql': 'mysql',\r\n  'pgsql': 'pgsql',\r\n  'plsql': 'sql',\r\n  \r\n  // Markup\r\n  'md': 'markdown',\r\n  'markdown': 'markdown',\r\n  'mdx': 'mdx',\r\n  'tex': 'latex',\r\n  'latex': 'latex',\r\n  'rst': 'restructuredtext',\r\n  \r\n  // Others\r\n  'dockerfile': 'dockerfile',\r\n  'makefile': 'makefile',\r\n  'mk': 'makefile',\r\n  'r': 'r',\r\n  'R': 'r',\r\n  'lua': 'lua',\r\n  'perl': 'perl',\r\n  'pl': 'perl',\r\n  'scala': 'scala',\r\n  'clj': 'clojure',\r\n  'cljs': 'clojure',\r\n  'graphql': 'graphql',\r\n  'gql': 'graphql',\r\n  'proto': 'protobuf',\r\n  'wasm': 'wasm',\r\n  'wat': 'wat'\r\n}\r\n\r\n/**\r\n * Language aliases for common alternative names\r\n */\r\nexport const LANGUAGE_ALIASES: Record<string, string> = {\r\n  'node': 'javascript',\r\n  'nodejs': 'javascript',\r\n  'react': 'javascriptreact',\r\n  'react-native': 'javascriptreact',\r\n  'angular': 'typescript',\r\n  'vue3': 'vue',\r\n  'vue2': 'vue',\r\n  'sass-indented': 'scss'\r\n}\r\n\r\n/**\r\n * Normalize language names to Monaco Editor's internal names\r\n */\r\nexport function normalizeLanguage(language: string): string {\r\n  // First check direct mapping\r\n  const directMap: Record<string, string> = {\r\n    'tsx': 'typescriptreact',\r\n    'jsx': 'javascriptreact',\r\n    'js': 'javascript',\r\n    'ts': 'typescript',\r\n    'py': 'python',\r\n    'yml': 'yaml',\r\n    'sh': 'shell',\r\n    'bash': 'shell',\r\n    'ps1': 'powershell',\r\n    'md': 'markdown'\r\n  }\r\n  \r\n  const normalized = language.toLowerCase()\r\n  return directMap[normalized] || \r\n         LANGUAGE_ALIASES[normalized] || \r\n         LANGUAGE_EXTENSIONS[normalized] || \r\n         normalized\r\n}\r\n\r\n/**\r\n * Get language by file extension\r\n */\r\nexport function getLanguageByExtension(filename: string): string {\r\n  const extension = filename.split('.').pop()?.toLowerCase() || ''\r\n  return LANGUAGE_EXTENSIONS[extension] || 'plaintext'\r\n}\r\n\r\n/**\r\n * Check if a language needs special plugin support\r\n */\r\nexport function needsCustomLanguagePlugin(language: string): boolean {\r\n  const normalizedLang = normalizeLanguage(language)\r\n  return ['vue', 'svelte', 'mdx', 'astro'].includes(normalizedLang)\r\n}\r\n\r\n/**\r\n * Get recommended plugins for a language\r\n */\r\nexport function getRecommendedPlugins(language: string): string[] {\r\n  const normalizedLang = normalizeLanguage(language)\r\n  const plugins: string[] = []\r\n  \r\n  // TypeScript/JavaScript family\r\n  if (['typescript', 'javascript', 'typescriptreact', 'javascriptreact'].includes(normalizedLang)) {\r\n    plugins.push('typescript', 'prettier', 'eslint')\r\n  }\r\n  \r\n  // React\r\n  if (['typescriptreact', 'javascriptreact'].includes(normalizedLang)) {\r\n    plugins.push('react', 'emmet')\r\n  }\r\n  \r\n  // Vue\r\n  if (normalizedLang === 'vue') {\r\n    plugins.push('vue', 'volar', 'emmet')\r\n  }\r\n  \r\n  // Python\r\n  if (normalizedLang === 'python') {\r\n    plugins.push('python', 'pylint')\r\n  }\r\n  \r\n  // HTML/CSS\r\n  if (['html', 'css', 'scss', 'less'].includes(normalizedLang)) {\r\n    plugins.push('emmet', 'prettier')\r\n  }\r\n  \r\n  // Go\r\n  if (normalizedLang === 'go') {\r\n    plugins.push('go', 'gofmt')\r\n  }\r\n  \r\n  // Rust\r\n  if (normalizedLang === 'rust') {\r\n    plugins.push('rust', 'rustfmt')\r\n  }\r\n  \r\n  return [...new Set(plugins)] // Remove duplicates\r\n}\r\n\r\n/**\r\n * Check if language supports formatting\r\n */\r\nexport function supportsFormatting(language: string): boolean {\r\n  const normalizedLang = normalizeLanguage(language)\r\n  const formattableLanguages = [\r\n    'javascript', 'typescript', 'javascriptreact', 'typescriptreact',\r\n    'json', 'html', 'css', 'scss', 'less',\r\n    'python', 'java', 'go', 'rust', 'csharp',\r\n    'php', 'ruby', 'swift', 'kotlin', 'dart',\r\n    'xml', 'yaml', 'sql', 'graphql'\r\n  ]\r\n  return formattableLanguages.includes(normalizedLang)\r\n}\r\n\r\n/**\r\n * Get language-specific tabSize recommendation\r\n */\r\nexport function getDefaultTabSize(language: string): number {\r\n  const normalizedLang = normalizeLanguage(language)\r\n  const tabSizeMap: Record<string, number> = {\r\n    'python': 4,\r\n    'go': 8,\r\n    'makefile': 8,\r\n    'yaml': 2,\r\n    'json': 2,\r\n    'javascript': 2,\r\n    'typescript': 2,\r\n    'javascriptreact': 2,\r\n    'typescriptreact': 2,\r\n    'vue': 2,\r\n    'html': 2,\r\n    'css': 2,\r\n    'scss': 2\r\n  }\r\n  return tabSizeMap[normalizedLang] || 4\r\n}\r\n\r\n/**\r\n * Configure language-specific Monaco settings\r\n */\r\nexport function configureLanguageDefaults(language: string) {\r\n  const normalizedLang = normalizeLanguage(language)\r\n  \r\n  // Configure TypeScript/JavaScript defaults\r\n  if (['typescript', 'javascript', 'typescriptreact', 'javascriptreact'].includes(normalizedLang)) {\r\n    const compilerOptions = {\r\n      target: monaco.languages.typescript.ScriptTarget.ES2020,\r\n      module: monaco.languages.typescript.ModuleKind.ESNext,\r\n      allowNonTsExtensions: true,\r\n      allowJs: true,\r\n      checkJs: true,\r\n      jsx: normalizedLang.includes('react') \r\n        ? monaco.languages.typescript.JsxEmit.React \r\n        : monaco.languages.typescript.JsxEmit.Preserve,\r\n      reactNamespace: 'React',\r\n      esModuleInterop: true,\r\n      allowSyntheticDefaultImports: true,\r\n      moduleResolution: monaco.languages.typescript.ModuleResolutionKind.NodeJs,\r\n      experimentalDecorators: true,\r\n      emitDecoratorMetadata: true,\r\n      strict: true,\r\n      noUnusedLocals: true,\r\n      noUnusedParameters: true,\r\n      skipLibCheck: true,\r\n      lib: ['es2020', 'dom', 'dom.iterable']\r\n    }\r\n    \r\n    if (normalizedLang.startsWith('typescript')) {\r\n      monaco.languages.typescript.typescriptDefaults.setCompilerOptions(compilerOptions)\r\n      monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({\r\n        noSemanticValidation: false,\r\n        noSyntaxValidation: false,\r\n        diagnosticCodesToIgnore: [1375, 1378] // Top-level await warnings\r\n      })\r\n    } else {\r\n      monaco.languages.typescript.javascriptDefaults.setCompilerOptions(compilerOptions)\r\n      monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({\r\n        noSemanticValidation: false,\r\n        noSyntaxValidation: false,\r\n        diagnosticCodesToIgnore: [1375, 1378]\r\n      })\r\n    }\r\n  }\r\n}\r\n"],"names":["LANGUAGE_EXTENSIONS","js","mjs","cjs","jsx","ts","tsx","mts","cts","vue","html","htm","xml","svg","css","scss","sass","less","styl","stylus","json","jsonc","json5","yaml","yml","toml","ini","conf","env","py","pyw","java","kt","kts","go","rs","php","rb","cs","fs","fsx","fsi","swift","dart","c","h","cpp","cc","cxx","hpp","hxx","m","mm","sh","bash","zsh","fish","ps1","psm1","psd1","bat","cmd","sql","mysql","pgsql","plsql","md","markdown","mdx","tex","latex","rst","dockerfile","makefile","mk","r","R","lua","perl","pl","scala","clj","cljs","graphql","gql","proto","wasm","wat","LANGUAGE_ALIASES","node","nodejs","react","angular","vue3","vue2","normalizeLanguage","language","normalized","toLowerCase","getLanguageByExtension","filename","extension","split","pop","getRecommendedPlugins","normalizedLang","plugins","includes","push","Set","supportsFormatting","getDefaultTabSize","python","javascript","typescript","javascriptreact","typescriptreact","configureLanguageDefaults","compilerOptions","target","monaco","languages","ScriptTarget","ES2020","module","ModuleKind","ESNext","allowNonTsExtensions","allowJs","checkJs","JsxEmit","React","Preserve","reactNamespace","esModuleInterop","allowSyntheticDefaultImports","moduleResolution","ModuleResolutionKind","NodeJs","experimentalDecorators","emitDecoratorMetadata","strict","noUnusedLocals","noUnusedParameters","skipLibCheck","lib","startsWith","typescriptDefaults","setCompilerOptions","setDiagnosticsOptions","noSemanticValidation","noSyntaxValidation","diagnosticCodesToIgnore","javascriptDefaults"],"mappings":"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"}