import*as e from"monaco-editor";import{registerEmmetProvider as t,configureEmmet as n,registerEmmetForCustomLanguages as a}from"./emmet.js";import{registerVueLanguage as i,addVueTypes as s,registerReactLanguage as r,addReactTypes as l}from"./languages.js";import{setupTypeScriptDefaults as o,setupJavaScriptDefaults as m}from"./workers.js";var u=Object.defineProperty,p=(e,t,n)=>(((e,t,n)=>{t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const g=class e{constructor(){p(this,"loadedPlugins",new Set)}static getInstance(){return e.instance||(e.instance=new e),e.instance}async loadPlugin(e,t={}){if(!this.loadedPlugins.has(e)){switch(e){case"emmet":await this.loadEmmetPlugin();break;case"vue":await this.loadVuePlugin();break;case"react":await this.loadReactPlugin();break;case"typescript":await this.loadTypeScriptPlugin()}this.loadedPlugins.add(e)}}async loadPlugins(e,t={}){const n=e.map(e=>this.loadPlugin(e,t));await Promise.all(n)}async loadByConfig(e){const t=[];e.emmet&&t.push("emmet"),e.snippets,await this.loadPlugins(t,e)}isPluginLoaded(e){return this.loadedPlugins.has(e)}async loadEmmetPlugin(){t(),n()}async loadVuePlugin(){i(),await s(),a(["vue"])}async loadReactPlugin(){r(),await l(),a(["typescriptreact","javascriptreact"])}async loadTypeScriptPlugin(){o(),m()}};p(g,"instance");let d=g;function c(){e.languages.registerCompletionItemProvider("javascript",{provideCompletionItems:(t,n)=>{const a=t.getWordUntilPosition(n),i={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:a.startColumn,endColumn:a.endColumn};return{suggestions:[{label:"log",kind:e.languages.CompletionItemKind.Snippet,insertText:"console.log(${1:value});",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"输出到控制台",range:i},{label:"func",kind:e.languages.CompletionItemKind.Snippet,insertText:"function ${1:name}(${2:params}) {\n\t${0}\n}",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"创建函数",range:i},{label:"arrow",kind:e.languages.CompletionItemKind.Snippet,insertText:"const ${1:name} = (${2:params}) => {\n\t${0}\n}",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"创建箭头函数",range:i},{label:"foreach",kind:e.languages.CompletionItemKind.Snippet,insertText:"${1:array}.forEach((${2:item}) => {\n\t${0}\n});",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"forEach 循环",range:i},{label:"map",kind:e.languages.CompletionItemKind.Snippet,insertText:"${1:array}.map((${2:item}) => ${0})",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"map 映射",range:i},{label:"filter",kind:e.languages.CompletionItemKind.Snippet,insertText:"${1:array}.filter((${2:item}) => ${0})",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"filter 过滤",range:i},{label:"reduce",kind:e.languages.CompletionItemKind.Snippet,insertText:"${1:array}.reduce((${2:acc}, ${3:item}) => {\n\t${0}\n}, ${4:initial})",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"reduce 归约",range:i},{label:"promise",kind:e.languages.CompletionItemKind.Snippet,insertText:"new Promise((resolve, reject) => {\n\t${0}\n})",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"创建 Promise",range:i},{label:"async",kind:e.languages.CompletionItemKind.Snippet,insertText:"async function ${1:name}(${2:params}) {\n\t${0}\n}",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"创建异步函数",range:i},{label:"try",kind:e.languages.CompletionItemKind.Snippet,insertText:"try {\n\t${1}\n} catch (error) {\n\t${0}\n}",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"try-catch 错误处理",range:i}]}}}),e.languages.registerCompletionItemProvider("typescript",{provideCompletionItems:(t,n)=>{const a=t.getWordUntilPosition(n),i={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:a.startColumn,endColumn:a.endColumn};return{suggestions:[{label:"interface",kind:e.languages.CompletionItemKind.Snippet,insertText:"interface ${1:Name} {\n\t${0}\n}",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"创建接口",range:i},{label:"type",kind:e.languages.CompletionItemKind.Snippet,insertText:"type ${1:Name} = ${0}",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"创建类型别名",range:i},{label:"class",kind:e.languages.CompletionItemKind.Snippet,insertText:"class ${1:Name} {\n\tconstructor(${2:params}) {\n\t\t${0}\n\t}\n}",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"创建类",range:i},{label:"enum",kind:e.languages.CompletionItemKind.Snippet,insertText:"enum ${1:Name} {\n\t${0}\n}",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"创建枚举",range:i}]}}})}export{d as PluginManager,c as registerCommonSnippets};
//# sourceMappingURL=plugins.js.map
