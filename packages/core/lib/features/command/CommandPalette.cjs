"use strict";var e=Object.defineProperty,s=(s,t,i)=>(((s,t,i)=>{t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i})(s,"symbol"!=typeof t?t+"":t,i),i);exports.CommandPalette=class{constructor(e,t={}){s(this,"registry"),s(this,"options"),s(this,"isOpen",!1),s(this,"selectedIndex",0),this.registry=e,this.options={maxResults:t.maxResults||20,fuzzySearch:!1!==t.fuzzySearch,showKeybindings:!1!==t.showKeybindings,showCategories:!1!==t.showCategories}}open(){this.isOpen=!0,this.selectedIndex=0}close(){this.isOpen=!1}search(e){return this.options.fuzzySearch?this.fuzzySearch(e):this.registry.searchCommands(e).slice(0,this.options.maxResults)}fuzzySearch(e){return this.registry.getAllCommands().map(s=>({command:s,score:this.calculateFuzzyScore(e,s.title)})).filter(e=>e.score>0).sort((e,s)=>s.score-e.score).slice(0,this.options.maxResults).map(e=>e.command)}calculateFuzzyScore(e,s){const t=e.toLowerCase(),i=s.toLowerCase();if(i===t)return 100;if(i.startsWith(t))return 90;if(i.includes(t))return 70;let r=0,o=0;for(const e of t){if(o=i.indexOf(e,o),-1===o)return 0;r+=50/(o+1),o++}return Math.min(r,100)}selectNext(){this.selectedIndex++}selectPrevious(){this.selectedIndex=Math.max(0,this.selectedIndex-1)}async executeSelected(e){this.selectedIndex<e.length&&(await this.registry.executeCommand(e[this.selectedIndex].id),this.close())}};
//# sourceMappingURL=CommandPalette.cjs.map
