"use strict";var e=Object.defineProperty,t=(t,a,s)=>(((t,a,s)=>{a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s})(t,"symbol"!=typeof a?a+"":a,s),s);exports.NaturalLanguageProcessor=class{constructor(e){t(this,"aiService"),t(this,"options"),t(this,"templates",new Map),this.aiService=e.aiService,this.options={aiService:e.aiService,defaultLanguage:e.defaultLanguage||"javascript",enableTemplates:!1!==e.enableTemplates},this.options.enableTemplates&&this.initializeTemplates()}initializeTemplates(){this.templates.set("create function","function ${name}(${params}) {\n  ${body}\n}"),this.templates.set("create class","class ${name} {\n  constructor(${params}) {\n    ${body}\n  }\n}"),this.templates.set("create array","const ${name} = [${items}]"),this.templates.set("create object","const ${name} = {\n  ${properties}\n}"),this.templates.set("for loop","for (let i = 0; i < ${length}; i++) {\n  ${body}\n}"),this.templates.set("if statement","if (${condition}) {\n  ${body}\n}"),this.templates.set("try catch","try {\n  ${body}\n} catch (error) {\n  ${handler}\n}")}async process(e,t){if(this.options.enableTemplates){const t=this.matchTemplate(e);if(t)return this.fillTemplate(t,e)}const a={query:e,context:t,targetLanguage:t?.language||this.options.defaultLanguage};return await this.aiService.naturalLanguageToCode(a)}matchTemplate(e){const t=e.toLowerCase().trim();for(const[e,a]of this.templates)if(t.includes(e))return a;return null}fillTemplate(e,t){let a=e;const s=t.match(/(?:named|called)\s+(\w+)/i);return a=s?a.replace("${name}",s[1]):a.replace("${name}","myFunction"),a=a.replace(/\$\{(\w+)\}/g,(e,t)=>`/* ${t} */`),a}parseCommand(e){const t=[{pattern:/create\s+(?:a\s+)?(\w+)(?:\s+named\s+(\w+))?/i,action:"create"},{pattern:/add\s+(\w+)\s+to\s+(\w+)/i,action:"add"},{pattern:/remove\s+(\w+)\s+from\s+(\w+)/i,action:"remove"},{pattern:/update\s+(\w+)\s+(?:to|with)\s+(.+)/i,action:"update"}];for(const{pattern:a,action:s}of t){const t=e.match(a);if(t)return{action:s,target:t[1]||"",parameters:this.extractParameters(e)}}return null}extractParameters(e){const t={},a=e.match(/named\s+(\w+)/i);a&&(t.name=a[1]);const s=e.match(/with\s+(?:parameters?|params?)\s+(.+?)(?:\s+that|\s+which|$)/i);s&&(t.params=s[1]);const n=e.match(/of\s+type\s+(\w+)/i);return n&&(t.type=n[1]),t}generateSnippet(e){if(!e)return"";const{action:t,target:a,parameters:s}=e,n=s.name||"myVariable";switch(t){case"create":return this.generateCreateSnippet(a,n,s);case"add":return`${a}.push(${n})`;case"remove":return`${a}.splice(${a}.indexOf(${n}), 1)`;case"update":return`${a} = ${n}`;default:return""}}generateCreateSnippet(e,t,a){switch(e.toLowerCase()){case"function":return`function ${t}(${a.params||""}) {\n  // TODO: Implement\n}`;case"class":return`class ${t} {\n  constructor(${a.params||""}) {\n    // TODO: Implement\n  }\n}`;case"variable":case"const":return`const ${t} = ${a.value||"null"}`;case"array":return`const ${t} = []`;case"object":return`const ${t} = {}`;default:return`// TODO: Create ${e} ${t}`}}async validateCode(e,t){try{return e.trim().length>0}catch{return!1}}addTemplate(e,t){this.templates.set(e,t)}removeTemplate(e){return this.templates.delete(e)}getTemplates(){return new Map(this.templates)}clearTemplates(){this.templates.clear()}};
//# sourceMappingURL=NaturalLanguageProcessor.cjs.map
