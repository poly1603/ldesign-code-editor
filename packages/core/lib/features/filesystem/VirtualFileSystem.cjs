"use strict";var e=Object.defineProperty,t=(t,i,r)=>(((t,i,r)=>{i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[i]=r})(t,"symbol"!=typeof i?i+"":i,r),r);exports.VirtualFileSystem=class{constructor(e={}){t(this,"root"),t(this,"files",new Map),t(this,"config"),this.config={rootPath:e.rootPath||"/",maxFileSize:e.maxFileSize||10485760,virtualMode:!1!==e.virtualMode},this.root={id:"root",name:"/",type:"directory",path:"/",children:[]},this.files.set("/",this.root)}async createFile(e,t=""){const i=e.split("/").pop()||"",r={id:this.generateId(),name:i,type:"file",path:e,content:t,size:t.length,created:Date.now(),modified:Date.now()};return this.files.set(e,r),this.addToParent(e,r),r}async createDirectory(e){const t=e.split("/").pop()||"",i={id:this.generateId(),name:t,type:"directory",path:e,children:[],created:Date.now()};return this.files.set(e,i),this.addToParent(e,i),i}async readFile(e){const t=this.files.get(e);if(!t||"file"!==t.type)throw new Error(`File not found: ${e}`);return t.content||""}async writeFile(e,t){let i=this.files.get(e);i?(i.content=t,i.size=t.length,i.modified=Date.now()):i=await this.createFile(e,t)}async deleteFile(e){this.files.delete(e),this.removeFromParent(e)}async renameFile(e,t){const i=this.files.get(e);if(!i)throw new Error(`File not found: ${e}`);i.path=t,i.name=t.split("/").pop()||"",this.files.delete(e),this.files.set(t,i)}getFile(e){return this.files.get(e)}listDirectory(e){const t=this.files.get(e);return t&&"directory"===t.type&&t.children||[]}getRoot(){return this.root}addToParent(e,t){const i=this.getParentPath(e),r=this.files.get(i);r&&"directory"===r.type&&(r.children||(r.children=[]),r.children.push(t))}removeFromParent(e){const t=this.getParentPath(e),i=this.files.get(t);i&&i.children&&(i.children=i.children.filter(t=>t.path!==e))}getParentPath(e){const t=e.split("/").filter(Boolean);return t.pop(),"/"+t.join("/")}generateId(){return`file-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}};
//# sourceMappingURL=VirtualFileSystem.cjs.map
