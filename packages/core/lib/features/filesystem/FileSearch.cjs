"use strict";exports.FileSearch=class{search(e,t){const n=[],s=t.regex?new RegExp(t.query,t.caseSensitive?"":"i"):null,i=t.caseSensitive?t.query:t.query.toLowerCase();for(const c of e){if("file"===c.type){const e=this.matchFileName(c.name,i,s,t.caseSensitive);if(e||t.includeContent){const o=t.includeContent&&c.content?this.searchInContent(c.content,i,s):[];(e||o.length>0)&&n.push({file:c,matches:o})}}else c.children&&n.push(...this.search(c.children,t));if(n.length>=(t.maxResults||100))break}return n}matchFileName(e,t,n,s){return n?n.test(e):(s?e:e.toLowerCase()).includes(t)}searchInContent(e,t,n){const s=[];return e.split("\n").forEach((e,i)=>{if(n){const t=e.match(n);t&&void 0!==t.index&&s.push({line:i+1,column:t.index,text:e})}else{const n=e.indexOf(t);-1!==n&&s.push({line:i+1,column:n,text:e})}}),s}};
//# sourceMappingURL=FileSearch.cjs.map
