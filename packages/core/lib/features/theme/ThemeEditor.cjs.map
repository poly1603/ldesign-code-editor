{"version":3,"file":"ThemeEditor.cjs","sources":["../../../src/features/theme/ThemeEditor.ts"],"sourcesContent":["/**\n * 主题编辑器\n */\n\nimport * as monaco from 'monaco-editor'\n\nexport interface ThemeData {\n  base: 'vs' | 'vs-dark' | 'hc-black' | 'hc-light'\n  inherit: boolean\n  rules: monaco.editor.ITokenThemeRule[]\n  colors: monaco.editor.IColors\n}\n\nexport class ThemeEditor {\n  private currentTheme: ThemeData | null = null\n\n  loadTheme(themeName: string): ThemeData | null {\n    // 从 Monaco 获取当前主题数据\n    this.currentTheme = {\n      base: 'vs-dark',\n      inherit: true,\n      rules: [],\n      colors: {},\n    }\n    return this.currentTheme\n  }\n\n  updateTheme(theme: Partial<ThemeData>): void {\n    if (this.currentTheme) {\n      this.currentTheme = { ...this.currentTheme, ...theme }\n    }\n  }\n\n  previewTheme(theme: ThemeData, themeName: string): void {\n    monaco.editor.defineTheme(themeName, theme)\n    monaco.editor.setTheme(themeName)\n  }\n\n  exportTheme(): string {\n    if (!this.currentTheme) {\n      throw new Error('No theme loaded')\n    }\n    return JSON.stringify(this.currentTheme, null, 2)\n  }\n\n  importTheme(json: string): ThemeData {\n    const theme = JSON.parse(json) as ThemeData\n    this.currentTheme = theme\n    return theme\n  }\n\n  saveTheme(name: string): void {\n    if (!this.currentTheme) return\n    localStorage.setItem(`theme:${name}`, JSON.stringify(this.currentTheme))\n  }\n\n  listSavedThemes(): string[] {\n    const themes: string[] = []\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i)\n      if (key?.startsWith('theme:')) {\n        themes.push(key.replace('theme:', ''))\n      }\n    }\n    return themes\n  }\n}\n\n"],"names":["a","Object","defineProperty","i","r","e","t","enumerable","configurable","writable","value","o","constructor","__publicField","this","loadTheme","themeName","currentTheme","base","inherit","rules","colors","updateTheme","theme","previewTheme","monaco","editor","defineTheme","setTheme","exportTheme","Error","JSON","stringify","importTheme","json","parse","saveTheme","name","localStorage","setItem","listSavedThemes","themes","length","key","startsWith","push","replace"],"mappings":"oSAIAA,EAAAC,OAAAC,eAAAC,EAAA,CAAAC,EAAAC,EAAAC,KAAA,EAAAF,EAAAC,EAAAC,KAAAD,KAAAD,EAAAJ,EAAAI,EAAAC,EAAA,CAAAE,YAAA,EAAAC,cAAA,EAAAC,UAAA,EAAAC,MAAAJ,IAAAF,EAAAC,GAAAC,GAAAK,CAAAP,EAAAC,EAAA,GAAAC,GAAAA,uBASO,MAAA,WAAAM,GACLC,EAAAC,KAAQ,eAAiC,KAAA,CAEzC,SAAAC,CAAUC,GAER,YAAKC,aAAe,CAClBC,KAAM,UACNC,SAAS,EACTC,MAAO,GACPC,OAAQ,CAAA,GAEHP,KAAKG,YACd,CAEA,WAAAK,CAAYC,GACNT,KAAKG,eACPH,KAAKG,aAAe,IAAKH,KAAKG,gBAAiBM,GAEnD,CAEA,YAAAC,CAAaD,EAAkBP,GAC7BS,EAAOC,OAAOC,YAAYX,EAAWO,GACrCE,EAAOC,OAAOE,SAASZ,EACzB,CAEA,WAAAa,GACE,IAAKf,KAAKG,aACR,MAAM,IAAIa,MAAM,mBAElB,OAAOC,KAAKC,UAAUlB,KAAKG,aAAc,KAAM,EACjD,CAEA,WAAAgB,CAAYC,GACV,MAAMX,EAAQQ,KAAKI,MAAMD,GACzB,OAAApB,KAAKG,aAAeM,EACbA,CACT,CAEA,SAAAa,CAAUC,GACHvB,KAAKG,cACVqB,aAAaC,QAAQ,SAASF,IAAQN,KAAKC,UAAUlB,KAAKG,cAC5D,CAEA,eAAAuB,GACE,MAAMC,EAAmB,GACzB,IAAA,IAAStC,EAAI,EAAGA,EAAImC,aAAaI,OAAQvC,IAAK,CAC5C,MAAMwC,EAAML,aAAaK,IAAIxC,GACzBwC,GAAKC,WAAW,WAClBH,EAAOI,KAAKF,EAAIG,QAAQ,SAAU,IAEtC,CACA,OAAOL,CACT"}