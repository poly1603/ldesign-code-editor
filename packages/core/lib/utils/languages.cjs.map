{"version":3,"file":"languages.cjs","sources":["../../src/utils/languages.ts"],"sourcesContent":["/**\r\n * Vue 语言支持\r\n */\r\n\r\nimport * as monaco from 'monaco-editor'\r\n\r\n/**\r\n * 注册 Vue 语言\r\n */\r\nexport function registerVueLanguage() {\r\n  // 注册 Vue 语言\r\n  monaco.languages.register({ id: 'vue' })\r\n\r\n  // 设置语言配置\r\n  monaco.languages.setLanguageConfiguration('vue', {\r\n    comments: {\r\n      blockComment: ['<!--', '-->']\r\n    },\r\n    brackets: [\r\n      ['<', '>'],\r\n      ['{', '}'],\r\n      ['(', ')']\r\n    ],\r\n    autoClosingPairs: [\r\n      { open: '<', close: '>' },\r\n      { open: '{', close: '}' },\r\n      { open: '(', close: ')' },\r\n      { open: '\"', close: '\"' },\r\n      { open: \"'\", close: \"'\" },\r\n      { open: '`', close: '`' }\r\n    ],\r\n    surroundingPairs: [\r\n      { open: '<', close: '>' },\r\n      { open: '{', close: '}' },\r\n      { open: '(', close: ')' },\r\n      { open: '\"', close: '\"' },\r\n      { open: \"'\", close: \"'\" },\r\n      { open: '`', close: '`' }\r\n    ],\r\n    folding: {\r\n      markers: {\r\n        start: new RegExp('^\\\\s*<!--\\\\s*#region\\\\b.*-->'),\r\n        end: new RegExp('^\\\\s*<!--\\\\s*#endregion\\\\b.*-->')\r\n      }\r\n    }\r\n  })\r\n\r\n  // 设置 Token 提供器（语法高亮）\r\n  monaco.languages.setMonarchTokensProvider('vue', {\r\n    defaultToken: '',\r\n    tokenPostfix: '.vue',\r\n\r\n    // 关键字\r\n    keywords: [\r\n      'template', 'script', 'style',\r\n      'v-if', 'v-else', 'v-else-if', 'v-for', 'v-show', 'v-bind', 'v-model', 'v-on',\r\n      'v-slot', 'v-pre', 'v-cloak', 'v-once', 'v-html', 'v-text',\r\n      'setup', 'props', 'emit', 'ref', 'reactive', 'computed', 'watch', 'onMounted'\r\n    ],\r\n\r\n    tokenizer: {\r\n      root: [\r\n        // Template 标签\r\n        [/<template[^>]*>/, { token: 'tag', next: '@template' }],\r\n        // Script 标签\r\n        [/<script[^>]*>/, { token: 'tag', next: '@script' }],\r\n        // Style 标签\r\n        [/<style[^>]*>/, { token: 'tag', next: '@style' }],\r\n        // HTML 注释\r\n        [/<!--/, 'comment', '@comment'],\r\n        // HTML 标签\r\n        [/<\\/?[a-zA-Z][\\w-]*/, { token: 'tag' }],\r\n        [/>/, 'tag'],\r\n      ],\r\n\r\n      template: [\r\n        [/<\\/template>/, { token: 'tag', next: '@pop' }],\r\n        // Vue 指令\r\n        [/v-[a-z-]+/, 'keyword'],\r\n        // 插值语法\r\n        [/\\{\\{/, { token: 'delimiter.bracket', next: '@interpolation' }],\r\n        // HTML 标签\r\n        [/<\\/?[a-zA-Z][\\w-]*/, 'tag'],\r\n        [/[^<{]+/, ''],\r\n      ],\r\n\r\n      interpolation: [\r\n        [/\\}\\}/, { token: 'delimiter.bracket', next: '@pop' }],\r\n        [/[^}]+/, 'variable'],\r\n      ],\r\n\r\n      script: [\r\n        [/<\\/script>/, { token: 'tag', next: '@pop' }],\r\n        // JavaScript/TypeScript 内容\r\n        [/[^<]+/, 'source'],\r\n      ],\r\n\r\n      style: [\r\n        [/<\\/style>/, { token: 'tag', next: '@pop' }],\r\n        // CSS 内容\r\n        [/[^<]+/, 'source'],\r\n      ],\r\n\r\n      comment: [\r\n        [/-->/, 'comment', '@pop'],\r\n        [/[^-]+/, 'comment'],\r\n        [/./, 'comment']\r\n      ]\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 注册 TSX/JSX 语言增强\r\n */\r\nexport function registerReactLanguage() {\r\n  // TSX 和 JSX 已经由 TypeScript 语言服务支持\r\n  // 这里只是增强配置\r\n\r\n  // 为 TypeScript 和 JavaScript 添加 JSX/TSX 支持\r\n  monaco.languages.typescript.typescriptDefaults.setCompilerOptions({\r\n    ...monaco.languages.typescript.typescriptDefaults.getCompilerOptions(),\r\n    jsx: monaco.languages.typescript.JsxEmit.React,\r\n    jsxFactory: 'React.createElement',\r\n    reactNamespace: 'React',\r\n    allowSyntheticDefaultImports: true,\r\n    esModuleInterop: true\r\n  })\r\n\r\n  monaco.languages.typescript.javascriptDefaults.setCompilerOptions({\r\n    ...monaco.languages.typescript.javascriptDefaults.getCompilerOptions(),\r\n    jsx: monaco.languages.typescript.JsxEmit.React,\r\n    jsxFactory: 'React.createElement',\r\n    allowSyntheticDefaultImports: true\r\n  })\r\n}\r\n\r\n/**\r\n * 添加 React 类型定义\r\n */\r\nexport async function addReactTypes() {\r\n  // 可以添加 React 的基础类型定义\r\n  const reactTypes = `\r\ndeclare namespace React {\r\n  type ReactNode = any;\r\n  type ReactElement = any;\r\n  interface FunctionComponent<P = {}> {\r\n    (props: P): ReactElement | null;\r\n  }\r\n  interface Component<P = {}, S = {}> {\r\n    props: P;\r\n    state: S;\r\n    render(): ReactNode;\r\n  }\r\n}\r\n  `\r\n\r\n  monaco.languages.typescript.typescriptDefaults.addExtraLib(\r\n    reactTypes,\r\n    'file:///node_modules/@types/react/index.d.ts'\r\n  )\r\n}\r\n\r\n/**\r\n * 添加 Vue 类型定义\r\n */\r\nexport async function addVueTypes() {\r\n  const vueTypes = `\r\ndeclare module '*.vue' {\r\n  import type { DefineComponent } from 'vue'\r\n  const component: DefineComponent<{}, {}, any>\r\n  export default component\r\n}\r\n  `\r\n\r\n  monaco.languages.typescript.typescriptDefaults.addExtraLib(\r\n    vueTypes,\r\n    'file:///vue-shim.d.ts'\r\n  )\r\n}\r\n"],"names":["async","monaco","languages","typescript","typescriptDefaults","addExtraLib","setCompilerOptions","getCompilerOptions","jsx","JsxEmit","React","jsxFactory","reactNamespace","allowSyntheticDefaultImports","esModuleInterop","javascriptDefaults","register","id","setLanguageConfiguration","comments","blockComment","brackets","autoClosingPairs","open","close","surroundingPairs","folding","markers","start","RegExp","end","setMonarchTokensProvider","defaultToken","tokenPostfix","keywords","tokenizer","root","token","next","template","interpolation","script","style","comment"],"mappings":"0TA4IAA,iBAiBEC,EAAOC,UAAUC,WAAWC,mBAAmBC,YAf5B,oRAiBjB,+CAEJ,sBAKAL,iBASEC,EAAOC,UAAUC,WAAWC,mBAAmBC,YAR9B,+JAUf,wBAEJ,gCAhEO,WAKLJ,EAAOC,UAAUC,WAAWC,mBAAmBE,mBAAmB,IAC7DL,EAAOC,UAAUC,WAAWC,mBAAmBG,qBAClDC,IAAKP,EAAOC,UAAUC,WAAWM,QAAQC,MACzCC,WAAY,sBACZC,eAAgB,QAChBC,8BAA8B,EAC9BC,iBAAiB,IAGnBb,EAAOC,UAAUC,WAAWY,mBAAmBT,mBAAmB,IAC7DL,EAAOC,UAAUC,WAAWY,mBAAmBR,qBAClDC,IAAKP,EAAOC,UAAUC,WAAWM,QAAQC,MACzCC,WAAY,sBACZE,8BAA8B,GAElC,8BA9HO,WAELZ,EAAOC,UAAUc,SAAS,CAAEC,GAAI,QAGhChB,EAAOC,UAAUgB,yBAAyB,MAAO,CAC/CC,SAAU,CACRC,aAAc,CAAC,UAAQ,WAEzBC,SAAU,CACR,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,MAERC,iBAAkB,CAChB,CAAEC,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,MAEtBC,iBAAkB,CAChB,CAAEF,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,MAEtBE,QAAS,CACPC,QAAS,CACPC,MAAO,IAAIC,OAAO,sCAClBC,IAAK,IAAID,OAAO,6CAMtB5B,EAAOC,UAAU6B,yBAAyB,MAAO,CAC/CC,aAAc,GACdC,aAAc,OAGdC,SAAU,CACR,WAAY,SAAU,QACtB,OAAQ,SAAU,YAAa,QAAS,SAAU,SAAU,UAAW,OACvE,SAAU,QAAS,UAAW,SAAU,SAAU,SAClD,QAAS,QAAS,OAAQ,MAAO,WAAY,WAAY,QAAS,aAGpEC,UAAW,CACTC,KAAM,CAEJ,CAAC,kBAAmB,CAAEC,MAAO,MAAOC,KAAM,cAE1C,CAAC,gBAAiB,CAAED,MAAO,MAAOC,KAAM,YAExC,CAAC,eAAgB,CAAED,MAAO,MAAOC,KAAM,WAEvC,CAAC,OAAQ,UAAW,YAEpB,CAAC,qBAAsB,CAAED,MAAO,QAChC,CAAC,IAAK,QAGRE,SAAU,CACR,CAAC,eAAgB,CAAEF,MAAO,MAAOC,KAAM,SAEvC,CAAC,YAAa,WAEd,CAAC,OAAQ,CAAED,MAAO,oBAAqBC,KAAM,mBAE7C,CAAC,qBAAsB,OACvB,CAAC,SAAU,KAGbE,cAAe,CACb,CAAC,OAAQ,CAAEH,MAAO,oBAAqBC,KAAM,SAC7C,CAAC,QAAS,aAGZG,OAAQ,CACN,CAAC,aAAc,CAAEJ,MAAO,MAAOC,KAAM,SAErC,CAAC,QAAS,WAGZI,MAAO,CACL,CAAC,YAAa,CAAEL,MAAO,MAAOC,KAAM,SAEpC,CAAC,QAAS,WAGZK,QAAS,CACP,CAAC,MAAO,UAAW,QACnB,CAAC,QAAS,WACV,CAAC,IAAK,cAId"}