{"version":3,"file":"features.cjs","sources":["../../src/utils/features.ts"],"sourcesContent":["/**\r\n * Advanced Editor Features\r\n * 提供高级编辑功能：多光标、括号匹配、代码折叠、查找替换、代码比较等\r\n */\r\n\r\nimport * as monaco from 'monaco-editor'\r\n\r\n/**\r\n * 编辑器功能配置接口\r\n */\r\nexport interface EditorFeatureConfig {\r\n  // 多光标编辑\r\n  multiCursor?: boolean\r\n  // 括号匹配高亮\r\n  bracketMatching?: boolean\r\n  // 代码折叠\r\n  folding?: boolean\r\n  // 查找替换\r\n  find?: boolean\r\n  // 代码比较\r\n  diffEditor?: boolean\r\n  // 缩略图\r\n  minimap?: boolean\r\n  // 面包屑导航\r\n  breadcrumbs?: boolean\r\n  // 代码镜头\r\n  codeLens?: boolean\r\n  // 智能选择\r\n  smartSelect?: boolean\r\n  // 多选择\r\n  multipleSelection?: boolean\r\n  // 列选择\r\n  columnSelection?: boolean\r\n  // 代码动作\r\n  codeActions?: boolean\r\n  // 快速修复\r\n  quickFix?: boolean\r\n  // 重命名\r\n  rename?: boolean\r\n  // 格式化\r\n  format?: boolean\r\n  // 注释\r\n  comments?: boolean\r\n}\r\n\r\n/**\r\n * 编辑器功能管理器\r\n */\r\nexport class EditorFeatureManager {\r\n  private editor: monaco.editor.IStandaloneCodeEditor | null = null\r\n  private diffEditor: monaco.editor.IStandaloneDiffEditor | null = null\r\n  private features: EditorFeatureConfig = {}\r\n  \r\n  constructor(editor?: monaco.editor.IStandaloneCodeEditor) {\r\n    if (editor) {\r\n      this.setEditor(editor)\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 设置编辑器实例\r\n   */\r\n  setEditor(editor: monaco.editor.IStandaloneCodeEditor): void {\r\n    this.editor = editor\r\n    this.applyFeatures()\r\n  }\r\n  \r\n  /**\r\n   * 配置功能\r\n   */\r\n  configureFeatures(config: EditorFeatureConfig): void {\r\n    this.features = { ...this.features, ...config }\r\n    this.applyFeatures()\r\n  }\r\n  \r\n  /**\r\n   * 应用功能配置\r\n   */\r\n  private applyFeatures(): void {\r\n    if (!this.editor) return\r\n    \r\n    const options: monaco.editor.IEditorOptions = {}\r\n    \r\n    // 括号匹配\r\n    if (this.features.bracketMatching !== undefined) {\r\n      options.matchBrackets = this.features.bracketMatching ? 'always' : 'never'\r\n    }\r\n    \r\n    // 代码折叠\r\n    if (this.features.folding !== undefined) {\r\n      options.folding = this.features.folding\r\n      options.foldingStrategy = 'indentation'\r\n      options.foldingHighlight = true\r\n      options.showFoldingControls = 'always'\r\n    }\r\n    \r\n    // 查找功能\r\n    if (this.features.find !== undefined) {\r\n      options.find = {\r\n        seedSearchStringFromSelection: 'always',\r\n        autoFindInSelection: 'multiline',\r\n        addExtraSpaceOnTop: true\r\n      }\r\n    }\r\n    \r\n    // 缩略图\r\n    if (this.features.minimap !== undefined) {\r\n      options.minimap = {\r\n        enabled: this.features.minimap,\r\n        showSlider: 'mouseover',\r\n        renderCharacters: true,\r\n        maxColumn: 80\r\n      }\r\n    }\r\n    \r\n    // 面包屑\r\n    if (this.features.breadcrumbs !== undefined) {\r\n      options.renderWhitespace = 'selection'\r\n    }\r\n    \r\n    // 多光标\r\n    if (this.features.multiCursor !== undefined) {\r\n      options.multiCursorModifier = 'alt'\r\n      options.multiCursorMergeOverlapping = true\r\n    }\r\n    \r\n    this.editor.updateOptions(options)\r\n  }\r\n  \r\n  /**\r\n   * 启用多光标编辑\r\n   */\r\n  enableMultiCursor(): void {\r\n    if (!this.editor) return\r\n    \r\n    this.editor.updateOptions({\r\n      multiCursorModifier: 'alt',\r\n      multiCursorMergeOverlapping: true,\r\n      multiCursorPaste: 'spread'\r\n    })\r\n    \r\n    // 添加多光标快捷键\r\n    this.editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyD, () => {\r\n      this.editor?.trigger('keyboard', 'editor.action.addSelectionToNextFindMatch', null)\r\n    })\r\n    \r\n    this.editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyMod.Shift | monaco.KeyCode.KeyL, () => {\r\n      this.editor?.trigger('keyboard', 'editor.action.selectHighlights', null)\r\n    })\r\n  }\r\n  \r\n  /**\r\n   * 添加自定义快捷键\r\n   */\r\n  addCustomKeybindings(): void {\r\n    if (!this.editor) return\r\n    \r\n    // 复制行\r\n    this.editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyMod.Shift | monaco.KeyCode.KeyD, () => {\r\n      this.editor?.trigger('keyboard', 'editor.action.copyLinesDownAction', null)\r\n    })\r\n    \r\n    // 删除行\r\n    this.editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyMod.Shift | monaco.KeyCode.KeyK, () => {\r\n      this.editor?.trigger('keyboard', 'editor.action.deleteLines', null)\r\n    })\r\n    \r\n    // 移动行\r\n    this.editor.addCommand(monaco.KeyMod.Alt | monaco.KeyCode.UpArrow, () => {\r\n      this.editor?.trigger('keyboard', 'editor.action.moveLinesUpAction', null)\r\n    })\r\n    \r\n    this.editor.addCommand(monaco.KeyMod.Alt | monaco.KeyCode.DownArrow, () => {\r\n      this.editor?.trigger('keyboard', 'editor.action.moveLinesDownAction', null)\r\n    })\r\n    \r\n    // 格式化文档\r\n    this.editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyMod.Shift | monaco.KeyCode.KeyF, () => {\r\n      this.editor?.trigger('keyboard', 'editor.action.formatDocument', null)\r\n    })\r\n    \r\n    // 注释切换\r\n    this.editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.Slash, () => {\r\n      this.editor?.trigger('keyboard', 'editor.action.commentLine', null)\r\n    })\r\n    \r\n    // 块注释\r\n    this.editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyMod.Shift | monaco.KeyCode.KeyA, () => {\r\n      this.editor?.trigger('keyboard', 'editor.action.blockComment', null)\r\n    })\r\n  }\r\n  \r\n  /**\r\n   * 启用代码折叠增强\r\n   */\r\n  enhanceFolding(): void {\r\n    if (!this.editor) return\r\n    \r\n    this.editor.updateOptions({\r\n      folding: true,\r\n      foldingStrategy: 'indentation',\r\n      foldingHighlight: true,\r\n      showFoldingControls: 'always',\r\n      foldingImportsByDefault: true\r\n    })\r\n    \r\n    // 添加折叠快捷键\r\n    this.editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyMod.Shift | monaco.KeyCode.BracketLeft, () => {\r\n      this.editor?.trigger('keyboard', 'editor.foldAll', null)\r\n    })\r\n    \r\n    this.editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyMod.Shift | monaco.KeyCode.BracketRight, () => {\r\n      this.editor?.trigger('keyboard', 'editor.unfoldAll', null)\r\n    })\r\n  }\r\n  \r\n  /**\r\n   * 启用智能括号匹配\r\n   */\r\n  enableSmartBrackets(): void {\r\n    if (!this.editor) return\r\n    \r\n    this.editor.updateOptions({\r\n      autoClosingBrackets: 'languageDefined',\r\n      autoClosingQuotes: 'languageDefined',\r\n      autoSurround: 'languageDefined',\r\n      matchBrackets: 'always',\r\n      bracketPairColorization: {\r\n        enabled: true,\r\n        independentColorPoolPerBracketType: true\r\n      }\r\n    })\r\n    \r\n    // 添加括号跳转\r\n    this.editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyMod.Shift | monaco.KeyCode.Backslash, () => {\r\n      this.editor?.trigger('keyboard', 'editor.action.jumpToBracket', null)\r\n    })\r\n  }\r\n  \r\n  /**\r\n   * 启用增强的查找替换\r\n   */\r\n  enableEnhancedFind(): void {\r\n    if (!this.editor) return\r\n    \r\n    this.editor.updateOptions({\r\n      find: {\r\n        seedSearchStringFromSelection: 'always',\r\n        autoFindInSelection: 'multiline',\r\n        addExtraSpaceOnTop: true,\r\n        loop: true\r\n      }\r\n    })\r\n    \r\n    // 自定义查找快捷键\r\n    this.editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyF, () => {\r\n      this.editor?.trigger('keyboard', 'actions.find', null)\r\n    })\r\n    \r\n    this.editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyH, () => {\r\n      this.editor?.trigger('keyboard', 'editor.action.startFindReplaceAction', null)\r\n    })\r\n  }\r\n  \r\n  /**\r\n   * 创建 Diff 编辑器\r\n   */\r\n  createDiffEditor(\r\n    container: HTMLElement,\r\n    original: string,\r\n    modified: string,\r\n    language?: string\r\n  ): monaco.editor.IStandaloneDiffEditor {\r\n    this.diffEditor = monaco.editor.createDiffEditor(container, {\r\n      enableSplitViewResizing: true,\r\n      renderSideBySide: true,\r\n      readOnly: false,\r\n      automaticLayout: true\r\n    })\r\n    \r\n    const originalModel = monaco.editor.createModel(original, language)\r\n    const modifiedModel = monaco.editor.createModel(modified, language)\r\n    \r\n    this.diffEditor.setModel({\r\n      original: originalModel,\r\n      modified: modifiedModel\r\n    })\r\n    \r\n    return this.diffEditor\r\n  }\r\n  \r\n  /**\r\n   * 切换到内联 Diff 视图\r\n   */\r\n  toggleInlineDiff(): void {\r\n    if (!this.diffEditor) return\r\n    \r\n    // const currentRenderSideBySide = this.diffEditor.getModel()\r\n    this.diffEditor.updateOptions({\r\n      renderSideBySide: false\r\n    })\r\n  }\r\n  \r\n  /**\r\n   * 添加代码动作\r\n   */\r\n  registerCodeActions(language: string): void {\r\n    monaco.languages.registerCodeActionProvider(language, {\r\n      provideCodeActions: (_model, _range, context, _token) => {\r\n        const actions: monaco.languages.CodeAction[] = []\r\n        \r\n        // 快速修复\r\n        if (context.markers.length > 0) {\r\n          actions.push({\r\n            title: '快速修复',\r\n            kind: 'quickfix',\r\n            diagnostics: context.markers,\r\n            edit: {\r\n              edits: []\r\n            }\r\n          })\r\n        }\r\n        \r\n        // 重构\r\n        actions.push({\r\n          title: '提取到函数',\r\n          kind: 'refactor.extract',\r\n          edit: {\r\n            edits: []\r\n          }\r\n        })\r\n        \r\n        // 自动导入\r\n        actions.push({\r\n          title: '自动导入',\r\n          kind: 'source.organizeImports',\r\n          edit: {\r\n            edits: []\r\n          }\r\n        })\r\n        \r\n        return {\r\n          actions,\r\n          dispose: () => {}\r\n        }\r\n      }\r\n    })\r\n  }\r\n  \r\n  /**\r\n   * 启用智能选择\r\n   */\r\n  enableSmartSelect(): void {\r\n    if (!this.editor) return\r\n    \r\n    // 扩展选择\r\n    this.editor.addCommand(monaco.KeyMod.Shift | monaco.KeyMod.Alt | monaco.KeyCode.RightArrow, () => {\r\n      this.editor?.trigger('keyboard', 'editor.action.smartSelect.expand', null)\r\n    })\r\n    \r\n    // 收缩选择\r\n    this.editor.addCommand(monaco.KeyMod.Shift | monaco.KeyMod.Alt | monaco.KeyCode.LeftArrow, () => {\r\n      this.editor?.trigger('keyboard', 'editor.action.smartSelect.shrink', null)\r\n    })\r\n  }\r\n  \r\n  /**\r\n   * 启用列选择模式\r\n   */\r\n  enableColumnSelection(): void {\r\n    if (!this.editor) return\r\n    \r\n    this.editor.updateOptions({\r\n      columnSelection: true\r\n    })\r\n    \r\n    // 添加列选择快捷键\r\n    this.editor.addCommand(monaco.KeyMod.Shift | monaco.KeyMod.Alt | monaco.KeyCode.DownArrow, () => {\r\n      this.editor?.trigger('keyboard', 'cursorColumnSelectDown', null)\r\n    })\r\n    \r\n    this.editor.addCommand(monaco.KeyMod.Shift | monaco.KeyMod.Alt | monaco.KeyCode.UpArrow, () => {\r\n      this.editor?.trigger('keyboard', 'cursorColumnSelectUp', null)\r\n    })\r\n  }\r\n  \r\n  /**\r\n   * 添加代码镜头（CodeLens）\r\n   */\r\n  registerCodeLens(language: string): void {\r\n    monaco.languages.registerCodeLensProvider(language, {\r\n      provideCodeLenses: (model, _token) => {\r\n        const lenses: monaco.languages.CodeLens[] = []\r\n        \r\n        // 查找函数定义\r\n        const lines = model.getLinesContent()\r\n        lines.forEach((line, index) => {\r\n          if (line.includes('function') || line.includes('const') || line.includes('class')) {\r\n            lenses.push({\r\n              range: new monaco.Range(index + 1, 1, index + 1, 1),\r\n              command: {\r\n                id: 'editor.action.showReferences',\r\n                title: '显示引用'\r\n              }\r\n            })\r\n          }\r\n        })\r\n        \r\n        return { lenses, dispose: () => {} }\r\n      },\r\n      \r\n      resolveCodeLens: (_model, codeLens, _token) => {\r\n        return codeLens\r\n      }\r\n    })\r\n  }\r\n  \r\n  /**\r\n   * 启用迷你地图增强\r\n   */\r\n  enhanceMinimap(): void {\r\n    if (!this.editor) return\r\n    \r\n    this.editor.updateOptions({\r\n      minimap: {\r\n        enabled: true,\r\n        showSlider: 'always',\r\n        renderCharacters: false,\r\n        maxColumn: 120,\r\n        scale: 1,\r\n        side: 'right'\r\n      }\r\n    })\r\n  }\r\n  \r\n  /**\r\n   * 添加自定义上下文菜单项\r\n   */\r\n  addContextMenuItems(): void {\r\n    if (!this.editor) return\r\n    \r\n    // 添加自定义动作\r\n    this.editor.addAction({\r\n      id: 'custom-copy-path',\r\n      label: '复制文件路径',\r\n      keybindings: [],\r\n      contextMenuGroupId: 'navigation',\r\n      contextMenuOrder: 1.5,\r\n      run: (_editor) => {\r\n        // 实现复制路径逻辑\r\n        console.log('Copy file path')\r\n      }\r\n    })\r\n    \r\n    this.editor.addAction({\r\n      id: 'custom-format-selection',\r\n      label: '格式化选中内容',\r\n      keybindings: [monaco.KeyMod.CtrlCmd | monaco.KeyMod.Shift | monaco.KeyCode.KeyI],\r\n      contextMenuGroupId: '1_modification',\r\n      contextMenuOrder: 2.5,\r\n      run: (editor) => {\r\n        editor.trigger('keyboard', 'editor.action.formatSelection', null)\r\n      }\r\n    })\r\n  }\r\n  \r\n  /**\r\n   * 启用所有增强功能\r\n   */\r\n  enableAllEnhancements(): void {\r\n    this.enableMultiCursor()\r\n    this.addCustomKeybindings()\r\n    this.enhanceFolding()\r\n    this.enableSmartBrackets()\r\n    this.enableEnhancedFind()\r\n    this.enableSmartSelect()\r\n    this.enableColumnSelection()\r\n    this.enhanceMinimap()\r\n    this.addContextMenuItems()\r\n  }\r\n  \r\n  /**\r\n   * 获取编辑器统计信息\r\n   */\r\n  getEditorStats(): EditorStats {\r\n    if (!this.editor) {\r\n      return {\r\n        lineCount: 0,\r\n        wordCount: 0,\r\n        characterCount: 0,\r\n        selectionCount: 0\r\n      }\r\n    }\r\n    \r\n    const model = this.editor.getModel()\r\n    if (!model) {\r\n      return {\r\n        lineCount: 0,\r\n        wordCount: 0,\r\n        characterCount: 0,\r\n        selectionCount: 0\r\n      }\r\n    }\r\n    \r\n    const content = model.getValue()\r\n    const words = content.match(/\\b\\w+\\b/g) || []\r\n    const selections = this.editor.getSelections() || []\r\n    \r\n    return {\r\n      lineCount: model.getLineCount(),\r\n      wordCount: words.length,\r\n      characterCount: content.length,\r\n      selectionCount: selections.length\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 销毁功能管理器\r\n   */\r\n  dispose(): void {\r\n    if (this.diffEditor) {\r\n      this.diffEditor.dispose()\r\n      this.diffEditor = null\r\n    }\r\n    this.editor = null\r\n  }\r\n}\r\n\r\n/**\r\n * 编辑器统计信息接口\r\n */\r\nexport interface EditorStats {\r\n  lineCount: number\r\n  wordCount: number\r\n  characterCount: number\r\n  selectionCount: number\r\n}\r\n\r\n/**\r\n * 创建功能管理器的便捷函数\r\n */\r\nexport function createFeatureManager(\r\n  editor?: monaco.editor.IStandaloneCodeEditor\r\n): EditorFeatureManager {\r\n  return new EditorFeatureManager(editor)\r\n}\r\n\r\n/**\r\n * 注册全局编辑器命令\r\n */\r\nexport function registerGlobalCommands(): void {\r\n  // 注册全局格式化命令\r\n  monaco.editor.addCommand({\r\n    id: 'editor.action.formatAll',\r\n    run: (_accessor, ..._args) => {\r\n      const activeEditor = monaco.editor.getEditors()[0]\r\n      if (activeEditor) {\r\n        activeEditor.trigger('keyboard', 'editor.action.formatDocument', null)\r\n      }\r\n    }\r\n  })\r\n  \r\n  // 注册全局查找命令\r\n  monaco.editor.addCommand({\r\n    id: 'editor.action.findAll',\r\n    run: (_accessor, ..._args) => {\r\n      const activeEditor = monaco.editor.getEditors()[0]\r\n      if (activeEditor) {\r\n        activeEditor.trigger('keyboard', 'actions.find', null)\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 配置编辑器性能选项\r\n */\r\nexport function configurePerformance(editor: monaco.editor.IStandaloneCodeEditor): void {\r\n  editor.updateOptions({\r\n    // 性能相关选项\r\n    fastScrollSensitivity: 5,\r\n    mouseWheelScrollSensitivity: 1,\r\n    smoothScrolling: true,\r\n    cursorBlinking: 'smooth',\r\n    cursorSmoothCaretAnimation: 'on',\r\n    // 渲染优化\r\n    renderLineHighlight: 'line',\r\n    renderWhitespace: 'none',\r\n    renderControlCharacters: false,\r\n    fontLigatures: true,\r\n    // 大文件优化\r\n    largeFileOptimizations: true\r\n  })\r\n}"],"names":["u","Object","defineProperty","a","i","t","o","enumerable","configurable","writable","value","c","EditorFeatureManager","constructor","editor","__publicField","this","setEditor","applyFeatures","configureFeatures","config","features","options","bracketMatching","matchBrackets","folding","foldingStrategy","foldingHighlight","showFoldingControls","find","seedSearchStringFromSelection","autoFindInSelection","addExtraSpaceOnTop","minimap","enabled","showSlider","renderCharacters","maxColumn","breadcrumbs","renderWhitespace","multiCursor","multiCursorModifier","multiCursorMergeOverlapping","updateOptions","enableMultiCursor","multiCursorPaste","addCommand","monaco","KeyMod","CtrlCmd","KeyCode","KeyD","trigger","Shift","KeyL","addCustomKeybindings","KeyK","Alt","UpArrow","DownArrow","KeyF","Slash","KeyA","enhanceFolding","foldingImportsByDefault","BracketLeft","BracketRight","enableSmartBrackets","autoClosingBrackets","autoClosingQuotes","autoSurround","bracketPairColorization","independentColorPoolPerBracketType","Backslash","enableEnhancedFind","loop","KeyH","createDiffEditor","container","original","modified","language","diffEditor","enableSplitViewResizing","renderSideBySide","readOnly","automaticLayout","originalModel","createModel","modifiedModel","setModel","toggleInlineDiff","registerCodeActions","languages","registerCodeActionProvider","provideCodeActions","_model","_range","context","_token","actions","markers","length","push","title","kind","diagnostics","edit","edits","dispose","enableSmartSelect","RightArrow","LeftArrow","enableColumnSelection","columnSelection","registerCodeLens","registerCodeLensProvider","provideCodeLenses","model","lenses","getLinesContent","forEach","line","index","includes","range","Range","command","id","resolveCodeLens","codeLens","enhanceMinimap","scale","side","addContextMenuItems","addAction","label","keybindings","contextMenuGroupId","contextMenuOrder","run","_editor","KeyI","enableAllEnhancements","getEditorStats","lineCount","wordCount","characterCount","selectionCount","getModel","content","getValue","words","match","selections","getSelections","getLineCount"],"mappings":"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"}