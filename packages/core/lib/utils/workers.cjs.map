{"version":3,"file":"workers.cjs","sources":["../../src/utils/workers.ts"],"sourcesContent":["/**\r\n * Monaco Editor Worker 配置工具\r\n */\r\n\r\nimport * as monaco from 'monaco-editor'\r\n\r\n/**\r\n * 配置 Monaco Editor Workers\r\n * 这样可以显著提升加载性能\r\n */\r\nexport function setupMonacoWorkers(_config?: any): void {\r\n  // vite-plugin-monaco-editor 会自动处理 worker 配置\r\n  // 我们只需要确保 MonacoEnvironment 存在\r\n  // @ts-ignore\r\n  if (!self.MonacoEnvironment) {\r\n    // @ts-ignore\r\n    self.MonacoEnvironment = {}\r\n  }\r\n}\r\n\r\n/**\r\n * 预加载常用语言支持\r\n */\r\nexport async function preloadLanguages(languages: string[] = []): Promise<void> {\r\n  const promises: Promise<any>[] = []\r\n\r\n  if (languages.includes('typescript') || languages.includes('javascript')) {\r\n    promises.push(\r\n      import('monaco-editor/esm/vs/language/typescript/monaco.contribution')\r\n    )\r\n  }\r\n\r\n  if (languages.includes('json')) {\r\n    promises.push(\r\n      import('monaco-editor/esm/vs/language/json/monaco.contribution')\r\n    )\r\n  }\r\n\r\n  if (languages.includes('css') || languages.includes('scss') || languages.includes('less')) {\r\n    promises.push(\r\n      import('monaco-editor/esm/vs/language/css/monaco.contribution')\r\n    )\r\n  }\r\n\r\n  if (languages.includes('html')) {\r\n    promises.push(\r\n      import('monaco-editor/esm/vs/language/html/monaco.contribution')\r\n    )\r\n  }\r\n\r\n  await Promise.all(promises)\r\n}\r\n\r\n/**\r\n * 配置 TypeScript 编译选项\r\n */\r\nexport function setupTypeScriptDefaults() {\r\n  monaco.languages.typescript.typescriptDefaults.setCompilerOptions({\r\n    target: monaco.languages.typescript.ScriptTarget.Latest,\r\n    allowNonTsExtensions: true,\r\n    moduleResolution: monaco.languages.typescript.ModuleResolutionKind.NodeJs,\r\n    module: monaco.languages.typescript.ModuleKind.CommonJS,\r\n    noEmit: true,\r\n    esModuleInterop: true,\r\n    jsx: monaco.languages.typescript.JsxEmit.React,\r\n    reactNamespace: 'React',\r\n    allowJs: true,\r\n    typeRoots: ['node_modules/@types']\r\n  })\r\n\r\n  monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({\r\n    noSemanticValidation: false,\r\n    noSyntaxValidation: false\r\n  })\r\n}\r\n\r\n/**\r\n * 配置 JavaScript 编译选项\r\n */\r\nexport function setupJavaScriptDefaults() {\r\n  monaco.languages.typescript.javascriptDefaults.setCompilerOptions({\r\n    target: monaco.languages.typescript.ScriptTarget.Latest,\r\n    allowNonTsExtensions: true,\r\n    allowJs: true,\r\n    jsx: monaco.languages.typescript.JsxEmit.React\r\n  })\r\n\r\n  monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({\r\n    noSemanticValidation: false,\r\n    noSyntaxValidation: false\r\n  })\r\n}\r\n"],"names":["async","languages","promises","includes","push","Promise","resolve","then","require","all","monaco","typescript","javascriptDefaults","setCompilerOptions","target","ScriptTarget","Latest","allowNonTsExtensions","allowJs","jsx","JsxEmit","React","setDiagnosticsOptions","noSemanticValidation","noSyntaxValidation","_config","self","MonacoEnvironment","typescriptDefaults","moduleResolution","ModuleResolutionKind","NodeJs","module","ModuleKind","CommonJS","noEmit","esModuleInterop","reactNamespace","typeRoots"],"mappings":"6TAuBAA,eAAuCC,EAAsB,IAC3D,MAAMC,EAA2B,IAE7BD,EAAUE,SAAS,eAAiBF,EAAUE,SAAS,gBACzDD,EAASE,KACPC,QAAAC,UAAAC,KAAA,WAAA,OAAAC,QAAO,2HAA8D,IAIrEP,EAAUE,SAAS,SACrBD,EAASE,KACPC,QAAAC,UAAAC,KAAA,WAAA,OAAAC,QAAO,qHAAwD,KAI/DP,EAAUE,SAAS,QAAUF,EAAUE,SAAS,SAAWF,EAAUE,SAAS,UAChFD,EAASE,KACPC,QAAAC,UAAAC,KAAA,WAAA,eAAO,oHAAuD,IAI9DN,EAAUE,SAAS,SACrBD,EAASE,KACPC,QAAAC,UAAAC,KAAA,WAAA,eAAO,qHAAwD,UAI7DF,QAAQI,IAAIP,EACpB,kCA4BO,WACLQ,EAAOT,UAAUU,WAAWC,mBAAmBC,mBAAmB,CAChEC,OAAQJ,EAAOT,UAAUU,WAAWI,aAAaC,OACjDC,sBAAsB,EACtBC,SAAS,EACTC,IAAKT,EAAOT,UAAUU,WAAWS,QAAQC,QAG3CX,EAAOT,UAAUU,WAAWC,mBAAmBU,sBAAsB,CACnEC,sBAAsB,EACtBC,oBAAoB,GAExB,6BAjFO,SAA4BC,GAI5BC,KAAKC,oBAERD,KAAKC,kBAAoB,CAAA,EAE7B,6CAuCEjB,EAAOT,UAAUU,WAAWiB,mBAAmBf,mBAAmB,CAChEC,OAAQJ,EAAOT,UAAUU,WAAWI,aAAaC,OACjDC,sBAAsB,EACtBY,iBAAkBnB,EAAOT,UAAUU,WAAWmB,qBAAqBC,OACnEC,OAAQtB,EAAOT,UAAUU,WAAWsB,WAAWC,SAC/CC,QAAQ,EACRC,iBAAiB,EACjBjB,IAAKT,EAAOT,UAAUU,WAAWS,QAAQC,MACzCgB,eAAgB,QAChBnB,SAAS,EACToB,UAAW,CAAC,yBAGd5B,EAAOT,UAAUU,WAAWiB,mBAAmBN,sBAAsB,CACnEC,sBAAsB,EACtBC,oBAAoB,GAExB"}