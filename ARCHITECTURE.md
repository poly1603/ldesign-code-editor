# æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ—ï¸ æ€»ä½“æ¶æ„

### åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              åº”ç”¨å±‚ (Application Layer)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Vanilla â”‚  â”‚   Vue 3  â”‚  â”‚  React   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              åŠŸèƒ½å±‚ (Feature Layer)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ AI  â”‚  â”‚ååŒ â”‚  â”‚æ–‡ä»¶ â”‚  â”‚è°ƒè¯• â”‚  â”‚æ‰©å±• â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ ¸å¿ƒå±‚ (Core Layer)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Editor â”‚  â”‚   DI   â”‚  â”‚Lifecycleâ”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             æ€§èƒ½å±‚ (Performance Layer)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ç¼“å­˜ â”‚  â”‚ç›‘æ§ â”‚  â”‚å†…å­˜ â”‚  â”‚åŠ è½½ â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            åŸºç¡€å±‚ (Foundation Layer)              â”‚
â”‚          Monaco Editor + TypeScript               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ æ ¸å¿ƒç»„ä»¶

### 1. ä¾èµ–æ³¨å…¥å®¹å™¨

```typescript
DIContainer
â”œâ”€â”€ ServiceDescriptor
â”œâ”€â”€ ServiceLifetime (singleton/transient/scoped)
â””â”€â”€ ServiceTokens
```

**èŒè´£**: ç®¡ç†æœåŠ¡çš„æ³¨å†Œã€è§£æå’Œç”Ÿå‘½å‘¨æœŸ

### 2. ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨

```typescript
EditorLifecycle
â”œâ”€â”€ LifecyclePhase (creating/initializing/ready...)
â”œâ”€â”€ LifecycleHooks (beforeCreate/created/mounted...)
â””â”€â”€ Event Listeners
```

**èŒè´£**: ç®¡ç†ç¼–è¾‘å™¨çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ

### 3. ä¸­é—´ä»¶ç®¡ç†å™¨

```typescript
MiddlewareManager
â”œâ”€â”€ MiddlewareFunction[]
â”œâ”€â”€ MiddlewareContext
â””â”€â”€ NextFunction
```

**èŒè´£**: å®ç°è¯·æ±‚æ‹¦æˆªå’Œå¤„ç†é“¾

## ğŸ¤– AI æ¶æ„

### AI æœåŠ¡å±‚

```
AIService
â”œâ”€â”€ OpenAI Provider
â”œâ”€â”€ Claude Provider
â””â”€â”€ Custom Provider

æ”¯æŒåŠŸèƒ½:
- ä»£ç è¡¥å…¨
- NL2Code
- ä»£ç è§£é‡Š
- æ–‡æ¡£ç”Ÿæˆ
- ä»£ç ä¿®å¤
- ä»£ç ä¼˜åŒ–
```

### AI è¡¥å…¨å±‚

```
AICompletionProvider
â”œâ”€â”€ ContextAnalyzer (ä¸Šä¸‹æ–‡åˆ†æ)
â”œâ”€â”€ CompletionItems (è¡¥å…¨é¡¹)
â””â”€â”€ InlineCompletion (å†…è”è¡¥å…¨)
```

### è‡ªç„¶è¯­è¨€å±‚

```
NaturalLanguageProcessor
â”œâ”€â”€ Template Matcher
â”œâ”€â”€ Command Parser
â””â”€â”€ Snippet Generator
```

## ğŸ‘¥ ååŒæ¶æ„

### é€šä¿¡å±‚

```
WebSocketClient
â”œâ”€â”€ Connection Management
â”œâ”€â”€ Reconnection Logic
â”œâ”€â”€ Heartbeat
â””â”€â”€ Message Queue
```

### åŒæ­¥å±‚

```
CRDTEngine (WOOT Algorithm)
â”œâ”€â”€ Lamport Clock
â”œâ”€â”€ Operation Transformation
â”œâ”€â”€ Conflict Resolution
â””â”€â”€ Version Management
```

### çŠ¶æ€å±‚

```
UserPresenceManager
â”œâ”€â”€ User Tracking
â”œâ”€â”€ Cursor Sync
â”œâ”€â”€ Selection Sync
â””â”€â”€ Online Status
```

## ğŸ“ æ–‡ä»¶ç³»ç»Ÿæ¶æ„

### è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ

```
VirtualFileSystem
â”œâ”€â”€ FileNode (Tree Structure)
â”œâ”€â”€ CRUD Operations
â”œâ”€â”€ Path Resolution
â””â”€â”€ Parent/Child Management
```

### UI å±‚

```
FileTree (Vue Component)
â”œâ”€â”€ FileTreeNode (Recursive)
â”œâ”€â”€ Drag & Drop
â””â”€â”€ Context Menu
```

### ç®¡ç†å±‚

```
TabManager
â”œâ”€â”€ Tab Info
â”œâ”€â”€ Active Tab Tracking
â”œâ”€â”€ Dirty State
â””â”€â”€ Tab Events
```

## ğŸ› è°ƒè¯•æ¶æ„

### æ–­ç‚¹å±‚

```
BreakpointManager
â”œâ”€â”€ Breakpoint Storage
â”œâ”€â”€ Conditional Breakpoints
â”œâ”€â”€ Visual Decorations
â””â”€â”€ Hit Count
```

### è°ƒè¯•æ§åˆ¶å±‚

```
DebugManager
â”œâ”€â”€ Pause/Resume
â”œâ”€â”€ Step Over/Into/Out
â”œâ”€â”€ Expression Evaluation
â””â”€â”€ State Management
```

## âš¡ æ€§èƒ½æ¶æ„

### åŠ è½½ä¼˜åŒ–

```
LazyLoader
â”œâ”€â”€ Language Loader
â”œâ”€â”€ Theme Loader
â”œâ”€â”€ Plugin Loader
â”œâ”€â”€ Retry Logic
â””â”€â”€ Timeout Control
```

### ç¼“å­˜ç³»ç»Ÿ

```
Cache System
â”œâ”€â”€ LRUCache (LRU Algorithm)
â”œâ”€â”€ WeakCache (WeakMap)
â”œâ”€â”€ MemoryCache (Auto Cleanup)
â””â”€â”€ Global Cache Instance
```

### ç›‘æ§ç³»ç»Ÿ

```
PerformanceMonitor
â”œâ”€â”€ Metrics Collection
â”œâ”€â”€ FPS Monitoring
â”œâ”€â”€ Long Task Detection
â”œâ”€â”€ Memory Tracking
â””â”€â”€ Report Generation
```

### å†…å­˜ç®¡ç†

```
MemoryManager
â”œâ”€â”€ Real-time Monitoring
â”œâ”€â”€ Threshold Alerts
â”œâ”€â”€ GC Triggering
â”œâ”€â”€ Leak Detection
â””â”€â”€ Snapshot Comparison
```

### å®ä¾‹æ± 

```
EditorPool
â”œâ”€â”€ Pool Management
â”œâ”€â”€ Instance Reuse
â”œâ”€â”€ Auto Cleanup
â””â”€â”€ Warmup Support
```

## ğŸ”Œ æ‰©å±•æ¶æ„

### åŠ è½½å±‚

```
ExtensionLoader
â”œâ”€â”€ Extension Registry
â”œâ”€â”€ Activation Events
â”œâ”€â”€ Contribution Points
â””â”€â”€ Context Management
```

### æ²™ç®±å±‚

```
ExtensionSandbox
â”œâ”€â”€ iframe Isolation
â”œâ”€â”€ Message Passing
â”œâ”€â”€ Security Control
â””â”€â”€ Resource Limits
```

## ğŸ“Š æ•°æ®æµ

### ç¼–è¾‘å™¨æ•°æ®æµ

```
User Input
    â†“
Event Handlers
    â†“
Middleware Chain
    â†“
Editor Core
    â†“
Monaco Editor
    â†“
Render
```

### AI è¡¥å…¨æ•°æ®æµ

```
User Typing
    â†“
Context Analyzer
    â†“
AI Service
    â†“
Completion Provider
    â†“
Monaco Suggestions
    â†“
User Selection
```

### ååŒæ•°æ®æµ

```
Local Edit
    â†“
CRDT Engine
    â†“
WebSocket Client
    â†“
Server
    â†“
Other Clients
    â†“
CRDT Engine
    â†“
Editor Update
```

## ğŸ¯ è®¾è®¡åŸåˆ™

### SOLID åŸåˆ™

- **S**ingle Responsibility - æ¯ä¸ªç±»å•ä¸€èŒè´£
- **O**pen/Closed - å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
- **L**iskov Substitution - å­ç±»å¯æ›¿æ¢çˆ¶ç±»
- **I**nterface Segregation - æ¥å£éš”ç¦»
- **D**ependency Inversion - ä¾èµ–å€’ç½®

### å…¶ä»–åŸåˆ™

- **DRY** - Don't Repeat Yourself
- **KISS** - Keep It Simple, Stupid
- **YAGNI** - You Aren't Gonna Need It
- **é«˜å†…èšä½è€¦åˆ**
- **é¢å‘æ¥å£ç¼–ç¨‹**

## ğŸ”„ æ‰©å±•æ€§

### æ·»åŠ æ–°åŠŸèƒ½

1. å®šä¹‰ç±»å‹ (`src/types/`)
2. å®ç°æœåŠ¡ (`src/features/`)
3. æ³¨å†Œåˆ° DI å®¹å™¨
4. å¯¼å‡º API (`src/index.ts`)
5. æ·»åŠ æ–‡æ¡£
6. ç¼–å†™æµ‹è¯•

### æ·»åŠ æ–°è¯­è¨€

1. åˆ›å»ºè¯­è¨€æœåŠ¡ (`src/languages/{lang}/`)
2. æ³¨å†Œåˆ° `LanguageRegistry`
3. æ·»åŠ è¡¥å…¨æä¾›å™¨
4. é…ç½®è¯­è¨€é»˜è®¤å€¼

### æ·»åŠ æ–°ä¸»é¢˜

1. å®šä¹‰ä¸»é¢˜æ•°æ®
2. æ³¨å†Œåˆ° `ThemeManager`
3. å¯¼å‡ºä¸»é¢˜

---

**ç‰ˆæœ¬**: 2.0.0  
**æœ€åæ›´æ–°**: 2025-01-22

